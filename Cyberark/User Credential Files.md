---
aliases: 
tags: 
date created: Friday, September 29th 2023, 2:15:17 pm
date modified: Saturday, January 27th 2024, 7:00:06 pm
---

## APIKeyManager Utility

### Overview

The APIKeyManager utility is a command line tool that generates and maintains an asymmetric key pair which provides a secure way for automated API calls and scripts, as well as CyberArk clients, to connect and authenticate to the Vault.

The private key is stored locally for use by the script or CyberArk client, while the public key is stored in the Vault. Both keys are associated with a username that was previously created in the Vault and used for API authentication.

This utility enables users to:

- Create a key pair and store the public key in the Vault (e.g. during a component registration, or manual key rotation)
    
- Create a key pair and save the public key locally (e.g. when the key registration will be performed by another person or process)
    
- Store a previously created public key in the Vault (e.g. when the key was generated by another person or process)
    
- Revoke an existing key pair
    

### Usage

|   |   |
|---|---|
||`apikeymanager <COMMAND> <COMMAND_OPTIONS>`|

[Commands](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Command options](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Help](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

### Logging

The APIKeyManager utility sends information and error messages to the console, as well as maintaining a log file that contains all types of messages (debug, warning, info, error). This log file is called apikeymanager.log and is stored in the 'Logs' folder with the utility executable.

When the log file reaches 5MB, a backup version of the current log file is saved and a new log file is created. Only one backup file is saved.

### Examples

[Create a key pair and send the public key to the Vault](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Create a key pair and output the public key to a file (without storing it in the Vault)](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Store a previously created public key in the Vault](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Revoke an existing component key pair](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

[Generate an authentication key for both Vault and RabbitMQ](https://docs.cyberark.com/PAS/Latest/en/Content/PASIMP/APIKeyManager.htm?TocPath=Administrator%7CUtilities%7CUser%20credential%20files%7C_____1#)

### CreateCredFile Utility

Components and applications that require automated access to the Digital Vault use a credential file that contains the user’s Vault username and encrypted logon information.

The credential file contains sensitive logon information, so it’s important to restrict access and usage as much as possible to reduce potential hijacking of the file.

Supported authentication types  
Password  
For password authentication, the credential file contains a user with CyberArk authentication that authenticates to the Vault using a username and a password. You can also use the following external authentication types along with password authentication.

Asymmetric keys  
You can create a credential file that contains a key-pair combination and the CyberArk user for authenticating to the Vault.

The credential file secret can be encrypted by the Windows DPAPI mechanism, which can be used for both password and key-pair (asymmetric keys) credential files. The DPAPI mechanism can be used with machine and user level protections either separately or together.

### Credential File Security

The credential file is protected using the following mechanisms:

- The encrypted password is changed daily, by default.
    

- The encrypted secret is encrypted using an AES 256-bit key that contains the following materials:
    
    - Random salt that is stored in the credential file (512-bit). This randomness assures that each credential file is encrypted with a unique key.
        
    - Environmental key materials:  
|Material type|Description|
|---|---|
|Application-based|Unique materials that identify the application in the logon process.|
|Machine-based|Unique materials that identify the machine in the logon process.|
|Component-based|Unique materials that identify the component in the logon process.|
    - The key is generated by a secure hash (SHA2-512) comprised of the above key materials.
        
- You can protect your credential file even more by using the appropriate operating system permissions.